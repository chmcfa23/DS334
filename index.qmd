---
title: "Tuberculosis and Streptomycin"
listing:
  contents: posts
  feed: true
  sort: "date desc"
  type: default
  categories: true
  sort-ui: false
  filter-ui: false
page-layout: full
title-block-banner: true
---

*2/2/2025*

**Introduction**

For my inaugural DS334 blog post, I thought it would be most appropriate to christen my very first website with my blossoming love for tuberculosis. Tuberculosis (or TB) is a disease of the respiratory tract, and one of our oldest biological "companions." With all the time we have spent together, TB has had many millennia to foil every attempt we make at preventing, diagnosing, and treating it- a fight that continues to this day.

Streptomycin is our "old faithful" of pharmaceutical antibiotics, and the go-to for most bacterial infections. But tuberculosis is no common cold, and across the 80 since streptomycin's discovery, it has already managed to develop strains resistant to old faithful.

Working with the R package "medicaldata," I was delighted to find that it contained a dataset that deals with this exact relationship called "strep_tb".

The code for loading this data in is shown below:

```{r}
#install.packages("medicaldata")
strep_tb <- medicaldata::strep_tb
```

There are 13 variables in this dataset and 107 cases, each representing one patient hospitilized with tuberculosis. It is divided into two groups in the "arm" column- a 'control' group that did not recieve streptomycin and a 'streptomycin' group that did.

Here is a sample of the data:

```{r}
head(strep_tb)
```

Other variables that I am interested in: "improved," which is whether the patient improved at the end of the study; "rad_num," which is the *degree* to which a patient recovered (1 being death and 6 being considerable improvement); and "baseline_condition," which describes how poorly the patient was doing at the start of the experiment.

**My main question** is how streptomycin affected these recovery variables.

To prepare this dataset for answering this question, I want to first create a new, numeric variable for the patients' baseline condition, so I can compare it to the already existing post-treatment condition.

```{r}
library(dplyr)

strep_tb <- strep_tb %>%
  mutate(base_num = case_when(baseline_condition == "1_Good" ~ 3,
                             baseline_condition == "2_Fair" ~ 2,
                             baseline_condition == "3_Poor" ~ 1)
         )

```

**Analyses**

Now, I want to see if a patient's baseline condition appears to have any correlation with the degree to which they improved. This I can do with a simple scatterplot. Because there are only a few whole numbers, I am going to use geom_jitter instead of geom_point.

```{r}
library(ggplot2)

ggplot(data = strep_tb, aes(x = base_num, y = rad_num)) +
  geom_jitter()
```

Well, that looks kind of weird and not very helpful. Maybe if I facet it by streptomycin treatment, it will make a little more sense.

```{r}
ggplot(data = strep_tb, aes(x = base_num, y = rad_num)) +
  geom_jitter(width = 0.15, height = 0.15) +
  facet_wrap(~arm)
```

In addition to facetting, I also drastically decreased the amount of jitter to lessen the impression that the data are not integers, and to make the relationship a little more clear. It's still not a "good" visualization, but for the data I'm working with, it's something.

Here we can see that yes, there is some relationship between a patient's baseline condition and how drastically they improved after the study. The better their starting condition (increasing from 1), the greater the degree to which they improved (rad_num, with 1 being death and 6 being considerable recovery).

Additionally, we see that when treated with streptomycin, fewer people died (had a rad_num of 1) and more people experienced greater recovery.

Now that a relationship between pre and post-treatment condition has been established, I am more comfortable answering my original question: "What effect does streptomycin have on the degree of recovery?"

For this, a simple facetted histogram would be the best option for visuualization.

```{r}
ggplot(data = strep_tb, aes(x = rad_num)) +
  geom_histogram() +
  facet_wrap(~arm)
```

But this is a kind of ugly graph. The bars are too thin, making the data look disconnected, and the x-axis both 1) doesn't have a very descriptive label and 2) does not show the odd numbers.

So I think I'll fix it.

```{r}
ggplot(data = strep_tb, aes(x = rad_num)) +
  geom_histogram(binwidth = 1, color = "black", fill = "blue") +
  labs(title = "TB Patient Recovery With and Without Streptomycin", 
       x = "Radiologic Number",
       caption = "*Radiologic Number represents the degree to which patients recovered after the experiment, with 6 \n indicating 'Considerable Improvement,' and 1  indicating that the patient passed away") +
  scale_x_continuous(breaks=seq(1,6,1)) +
  facet_wrap(~arm)
```

This is the final graph, I made the x-axis prettier and more useful, bulked up the bars, and added a nice little caption and a title that should help to provide context.

**Conclusion**

I think I definitely could have picked a better dataset for this blog, there wasn't much variety in the variables in terms of type (numeric, categorical, etc...) and in the actual levels (eg. there only being 6 possible values for the recovery degrees.) But given what I had, I think I generated two decent graphs.

If I had more time to find a dataset, I probably would have looked for something with less "subjectivity", like vital statistics, time in hospital, age and sex information, etc... But you win some and lose some

**Connection to Class Ideas**

I tried to be creative and use stuff we learned in class. I made a point to use dplyr to create that Baseline Condition variable (because for some reason they didn't think to include a purely numeric variable for that like they did with the "radiologic_6m" one??) And I tried to show off two graphs, one with two quantitatives and one with a mix. If there were more categorical variables, I would have liked to do a barplot or something. A lesson for next time.

Also, since I sort of wanted to pretend that I was generating that histogram for an actual research paper, I played around with some graph features to make it look a little more professional.
